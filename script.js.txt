// Get canvas
const canvas = document.getElementById("scratch");
const ctx = canvas.getContext("2d");

// Set canvas size
canvas.width = 300;
canvas.height = 200;

// Draw gray scratch layer
ctx.fillStyle = "#999";
ctx.fillRect(0, 0, canvas.width, canvas.height);

// Write text on scratch layer
ctx.fillStyle = "#fff";
ctx.font = "20px Arial";
ctx.fillText("SCRATCH HERE", 70, 110);

// To check when user is scratching
let isDrawing = false;

// Mouse events (for computer)
canvas.addEventListener("mousedown", function () {
  isDrawing = true;
});

canvas.addEventListener("mouseup", function () {
  isDrawing = false;
});

canvas.addEventListener("mousemove", scratch);

// Touch events (for mobile)
canvas.addEventListener("touchstart", function () {
  isDrawing = true;
});

canvas.addEventListener("touchend", function () {
  isDrawing = false;
});

canvas.addEventListener("touchmove", scratch);

// Scratch function
function scratch(e) {
  if (!isDrawing) return;

  let rect = canvas.getBoundingClientRect();
  let x, y;

  if (e.touches) {
    x = e.touches[0].clientX - rect.left;
    y = e.touches[0].clientY - rect.top;
  } else {
    x = e.clientX - rect.left;
    y = e.clientY - rect.top;
  }

  ctx.globalCompositeOperation = "destination-out";
  ctx.beginPath();
  ctx.arc(x, y, 15, 0, Math.PI * 2);
  ctx.fill();
}
